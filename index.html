<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Shaka Player Demo</title>
  <!-- Shaka Player library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.2.1/shaka-player.compiled.js"></script>
  <style>
    video {
      width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <video id="video" controls autoplay></video>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the shaka player
      var video = document.getElementById('video');
      var player = new shaka.Player(video);

      // Attach the player to the window to make it easy to access in the JS console
      window.player = player;

      // Listen for error events
      player.addEventListener('error', onErrorEvent);

      // Try to load a manifest
      player.load('https://live-hls-abr-cdn.livepush.io/live/bigbuckbunnyclip/index.mpd').then(function() {
        console.log('The video has now been loaded!');
      }).catch(onError);  // onError is executed if the asynchronous load fails.

      function onErrorEvent(event) {
        onError(event.detail);
      }

      function onError(error) {
        console.error('Error code', error.code, 'object', error);
      }
    });
  </script>
</body>
</html>
